<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>黄金价格监控 | Gold Monitor</title>
    <link rel="stylesheet" href="styles.css">
    <script src="/socket.io/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>黄金价格监控</h1>
            <div id="status-indicator" class="status connected">已连接</div>
        </header>

        <main>
            <!-- International Gold Section -->
            <div class="section-group">
                <h2 class="section-title">国际现货报价</h2>
                
                <!-- USD Card -->
                <div id="card-intl-usd" class="gold-card">
                    <div class="card-header">
                        <div class="title-group">
                            <span class="name">现货黄金 (USD)</span>
                            <span class="badge">国际</span>
                        </div>
                        <div class="action-group">
                            <span class="icon">刷新</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="main-price" id="intl-price-usd">--.--</div>
                        <div class="unit-group">
                            <div class="unit">美元/盎司</div>
                        </div>
                    </div>
                    <div class="card-change">
                        <span id="intl-change-usd">--.--</span>
                        <span id="intl-percent-usd">--.--%</span>
                    </div>
                    <div class="card-footer">
                        <div class="info-grid">
                            <span>开盘:<em id="intl-open-usd">--.--</em></span>
                            <span>昨收:<em id="intl-close-usd">--.--</em></span>
                            <span>最高:<em id="intl-high-usd">--.--</em></span>
                            <span>最低:<em id="intl-low-usd">--.--</em></span>
                        </div>
                        <div class="card-time" id="intl-time-usd">更新: --:--:--</div>
                    </div>
                </div>

                <!-- CNY Card -->
                <div id="card-intl-cny" class="gold-card">
                    <div class="card-header">
                        <div class="title-group">
                            <span class="name">现货黄金 (CNY)</span>
                            <span class="badge">换算</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="main-price" id="intl-price-cny">--.--</div>
                        <div class="unit-group">
                            <div class="unit">元/克</div>
                        </div>
                    </div>
                    <div class="card-change">
                        <span id="intl-change-cny">--.--</span>
                        <span id="intl-percent-cny">--.--%</span>
                    </div>
                    <div class="card-footer">
                        <div class="info-grid">
                            <span>开盘:<em id="intl-open-cny">--.--</em></span>
                            <span>昨收:<em id="intl-close-cny">--.--</em></span>
                            <span>最高:<em id="intl-high-cny">--.--</em></span>
                            <span>最低:<em id="intl-low-cny">--.--</em></span>
                        </div>
                        <div class="card-time" id="intl-time-cny">更新: --:--:--</div>
                    </div>
                </div>
            </div>

            <!-- CMB Gold Section -->
            <div class="section-group">
                <h2 class="section-title">招行金价动态</h2>
                <div id="card-cmb" class="gold-card">
                    <div class="card-header">
                        <div class="title-group">
                            <span class="name">招行金 (CNY)</span>
                            <span class="badge">官方</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="main-price" id="cmb-price">--.--</div>
                        <div class="unit-group">
                            <div class="unit">元/克</div>
                        </div>
                    </div>
                    <div class="card-change">
                        <span id="cmb-change">--.--</span>
                        <span id="cmb-percent">--.--%</span>
                    </div>
                    <div class="card-footer">
                        <div class="info-row">
                            <span>昨收: <em id="cmb-close">--.--</em></span>
                        </div>
                        <div class="info-grid">
                            <span>买入:<em id="cmb-buy">--.--</em></span>
                            <span>卖出:<em id="cmb-sell">--.--</em></span>
                            <span>最高:<em id="cmb-high">--.--</em></span>
                            <span>最低:<em id="cmb-low">--.--</em></span>
                        </div>
                        <div class="card-time" id="cmb-time">更新: --:--:--</div>
                    </div>
                </div>
            </div>

            <!-- CCB Gold Section -->
            <div class="section-group">
                <h2 class="section-title">建行金价动态</h2>
                <div id="card-ccb" class="gold-card">
                    <div class="card-header">
                        <div class="title-group">
                            <span class="name">建行账户金 (CNY)</span>
                            <span class="badge">官方</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="main-price" id="ccb-price">--.--</div>
                        <div class="unit-group">
                            <div class="unit">元/克</div>
                        </div>
                    </div>
                    <div class="card-change">
                        <span id="ccb-change">--.--</span>
                        <span id="ccb-percent">--.--%</span>
                    </div>
                    <div class="card-footer">
                        <div class="info-row">
                            <span>昨收: <em id="ccb-close">--.--</em></span>
                        </div>
                        <div class="info-grid">
                            <span>买入:<em id="ccb-buy">--.--</em></span>
                            <span>卖出:<em id="ccb-sell">--.--</em></span>
                            <span>最高:<em id="ccb-high">--.--</em></span>
                            <span>最低:<em id="ccb-low">--.--</em></span>
                        </div>
                        <div class="card-time" id="ccb-time">更新: --:--:--</div>
                    </div>
                </div>
            </div>

            <section class="config-section">
                <h2>监控配置</h2>
                <form id="config-form">
                    <div class="form-group box-style">
                        <label>查询间隔 (秒)</label>
                        <input type="number" id="interval" min="1">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group box-style">
                            <label>低价预警 (≤)</label>
                            <input type="number" id="lowThreshold" step="0.01">
                        </div>
                        <div class="form-group box-style">
                            <label>高价预警 (≥)</label>
                            <input type="number" id="highThreshold" step="0.01">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group box-style">
                            <label>波动检测模式</label>
                            <div class="radio-group">
                                <label><input type="radio" name="fluctuationMode" value="percent" checked> 百分比 (%)</label>
                                <label><input type="radio" name="fluctuationMode" value="value"> 数值 (元)</label>
                            </div>
                            <div style="margin-top: 8px;">
                                <label>阈值 <span id="threshold-unit">(%)</span></label>
                                <input type="number" id="fluctuationThreshold" step="0.1">
                            </div>
                        </div>
                        <div class="form-group box-style">
                            <label>波动窗口 (分钟)</label>
                            <input type="number" id="fluctuationWindow" step="1">
                        </div>
                    </div>

                    <div class="form-group box-style">
                        <label>波动推送渠道</label>
                        <div class="radio-group">
                            <label><input type="radio" name="alertChannel" value="all" checked> 全部</label>
                            <label><input type="radio" name="alertChannel" value="cmb"> 招行</label>
                            <label><input type="radio" name="alertChannel" value="ccb"> 建行</label>
                            <label><input type="radio" name="alertChannel" value="intl"> 国际金</label>
                        </div>
                    </div>

                    <div class="form-group box-style" style="grid-column: span 2;">
                        <label>Bark 推送地址列表</label>
                        <div id="bark-url-list" class="dynamic-list">
                            <!-- 动态生成 -->
                        </div>
                        <button type="button" id="add-bark-url" class="secondary-btn" style="margin-top: 10px;">+ 添加地址</button>
                    </div>

                    <div class="form-row">
                        <div class="form-group box-style">
                            <label>重试次数</label>
                            <input type="number" id="alertRetryCount" min="0" max="10">
                        </div>
                        <div class="form-group box-style">
                            <label>重试间隔 (秒)</label>
                            <input type="number" id="alertRetryInterval" min="1" max="60">
                        </div>
                    </div>

                    <button type="submit" class="primary-btn">保存配置</button>
                    <button type="button" id="test-bark" class="secondary-btn" style="width: 100%; margin-top: 10px;">发送全量测试通知</button>
                </form>
            </section>

            <section class="log-section">
                <h2>系统日志</h2>
                <div id="log-container">
                    <!-- Logs go here -->
                </div>
            </section>
        </main>
    </div>
    <script src="app.js"></script>
</body>
</html>
